<%= form_with model: post do |f| %>
<%= f.label :title %>
<%= f.text_field :title, class: "form-control" %>

<%= f.label :source %>
<%= f.text_field :source, class: "form-control" %>

<%= f.label :store_url %>
<%= f.text_field :store_url, class: "form-control" %>

<%= f.fields_for :dish do |dish_f| %>
  <%= dish_f.label :introduction %>
  <%= dish_f.text_area :introduction, class: "form-control" %>

  <%= dish_f.label :description %>
  <%= dish_f.text_area :description, class: "form-control" %>
<% end %>

<% if defined?(@genre_tag_name) %>

<%= label_tag :genre_tag_name, "genre_tag(edit)" %>
<%= text_field_tag 'post[post_genre_tags_attributes][0][genre_tag_attributes][name]', @genre_tag_name, class: "form-control" %>

<% else %>

<%= f.fields_for :post_genre_tags do |post_genre_f| %>
  <%= post_genre_f.fields_for :genre_tag do |genre_f| %>
    <%= genre_f.label :genre_tag_name %>
    <%= genre_f.text_field :name, class: "form-control" %>
  <% end %>
<% end %>

<% end %>

<%= f.submit nil, class: "btn btn-primary" %>
<% end %>